(self.webpackChunkiha_ecommerce=self.webpackChunkiha_ecommerce||[]).push([[345],{9345:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Y});var r,a,o,u,i=n(7294),c=n(9642),l=n(133),s=n(8529),m=n(7471),f=n(2659),d=n(9016),p=n(852),v=n(2506),g=n(5057),y=n(4198),b=n(3980),I=n(9472);function h(){var e=(0,i.useState)(I.k)[0];return(0,i.useEffect)((function(){return function(){return e.dispose()}}),[e]),e}!function(e){e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing"}(r||(r={})),function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"}(o||(o={})),function(e){e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem"}(u||(u={}));var x=((a={})[u.CloseMenu]=function(e){return e.menuState===o.Closed?e:(0,c.gY)({},e,{activeItemIndex:null,menuState:o.Closed})},a[u.OpenMenu]=function(e){return e.menuState===o.Open?e:(0,c.gY)({},e,{menuState:o.Open})},a[u.GoToItem]=function(e,t){var n=function(e,t){var n=t.resolveItems();if(n.length<=0)return null;var a=t.resolveActiveIndex(),o=null!=a?a:-1,u=function(){switch(e.focus){case r.First:return n.findIndex((function(e){return!t.resolveDisabled(e)}));case r.Previous:var a=n.slice().reverse().findIndex((function(e,n,r){return!(-1!==o&&r.length-n-1>=o||t.resolveDisabled(e))}));return-1===a?a:n.length-1-a;case r.Next:return n.findIndex((function(e,n){return!(n<=o||t.resolveDisabled(e))}));case r.Last:var u=n.slice().reverse().findIndex((function(e){return!t.resolveDisabled(e)}));return-1===u?u:n.length-1-u;case r.Specific:return n.findIndex((function(n){return t.resolveId(n)===e.id}));case r.Nothing:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}();return-1===u?a:u}(t,{resolveItems:function(){return e.items},resolveActiveIndex:function(){return e.activeItemIndex},resolveId:function(e){return e.id},resolveDisabled:function(e){return e.dataRef.current.disabled}});return""===e.searchQuery&&e.activeItemIndex===n?e:(0,c.gY)({},e,{searchQuery:"",activeItemIndex:n})},a[u.Search]=function(e,t){var n=e.searchQuery+t.value.toLowerCase(),r=e.items.findIndex((function(e){var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(n))&&!e.dataRef.current.disabled}));return-1===r||r===e.activeItemIndex?(0,c.gY)({},e,{searchQuery:n}):(0,c.gY)({},e,{searchQuery:n,activeItemIndex:r})},a[u.ClearSearch]=function(e){return""===e.searchQuery?e:(0,c.gY)({},e,{searchQuery:""})},a[u.RegisterItem]=function(e,t){return(0,c.gY)({},e,{items:[].concat(e.items,[{id:t.id,dataRef:t.dataRef}])})},a[u.UnregisterItem]=function(e,t){var n=e.items.slice(),r=null!==e.activeItemIndex?n[e.activeItemIndex]:null,a=n.findIndex((function(e){return e.id===t.id}));return-1!==a&&n.splice(a,1),(0,c.gY)({},e,{items:n,activeItemIndex:a===e.activeItemIndex||null===r?null:n.indexOf(r)})},a),E=(0,i.createContext)(null);function S(e){var t=(0,i.useContext)(E);if(null===t){var n=new Error("<"+e+" /> is missing a parent <"+w.name+" /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(n,S),n}return t}function k(e,t){return(0,l.E)(t.type,x,e,t)}E.displayName="MenuContext";var R=i.Fragment;function w(e){var t,n=(0,i.useReducer)(k,{menuState:o.Closed,buttonRef:(0,i.createRef)(),itemsRef:(0,i.createRef)(),items:[],searchQuery:"",activeItemIndex:null}),r=n[0],a=r.menuState,c=r.itemsRef,m=r.buttonRef,f=n[1];(0,y.s)("mousedown",(function(e){var t,n,r,i=e.target;a===o.Open&&((null==(t=m.current)?void 0:t.contains(i))||(null==(n=c.current)?void 0:n.contains(i))||(f({type:u.CloseMenu}),(0,g.sP)(i,g.tJ.Loose)||(e.preventDefault(),null==(r=m.current)||r.focus())))}));var d=(0,i.useMemo)((function(){return{open:a===o.Open}}),[a]);return i.createElement(E.Provider,{value:n},i.createElement(b.up,{value:(0,l.E)(a,(t={},t[o.Open]=b.ZM.Open,t[o.Closed]=b.ZM.Closed,t))},(0,s.sY)({props:e,slot:d,defaultTag:R,name:"Menu"})))}var C=(0,s.yV)((function e(t,n){var a,l=S([w.name,e.name].join(".")),p=l[0],g=l[1],y=(0,m.T)(p.buttonRef,n),b="headlessui-menu-button-"+(0,v.M)(),I=h(),x=(0,i.useCallback)((function(e){switch(e.key){case f.R.Space:case f.R.Enter:case f.R.ArrowDown:e.preventDefault(),e.stopPropagation(),g({type:u.OpenMenu}),I.nextFrame((function(){return g({type:u.GoToItem,focus:r.First})}));break;case f.R.ArrowUp:e.preventDefault(),e.stopPropagation(),g({type:u.OpenMenu}),I.nextFrame((function(){return g({type:u.GoToItem,focus:r.Last})}))}}),[g,I]),E=(0,i.useCallback)((function(e){switch(e.key){case f.R.Space:e.preventDefault()}}),[]),k=(0,i.useCallback)((function(e){if((0,d.P)(e.currentTarget))return e.preventDefault();t.disabled||(p.menuState===o.Open?(g({type:u.CloseMenu}),I.nextFrame((function(){var e;return null==(e=p.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),e.stopPropagation(),g({type:u.OpenMenu})))}),[g,I,p,t.disabled]),R=(0,i.useMemo)((function(){return{open:p.menuState===o.Open}}),[p]),C=t,N={ref:y,id:b,type:"button","aria-haspopup":!0,"aria-controls":null==(a=p.itemsRef.current)?void 0:a.id,"aria-expanded":t.disabled?void 0:p.menuState===o.Open,onKeyDown:x,onKeyUp:E,onClick:k};return(0,s.sY)({props:(0,c.gY)({},C,N),slot:R,defaultTag:"button",name:"Menu.Button"})})),N=s.AN.RenderStrategy|s.AN.Static,M=(0,s.yV)((function e(t,n){var a,l,d,g,y,x,E,k,R,C,M=S([w.name,e.name].join(".")),T=M[0],O=M[1],F=(0,m.T)(T.itemsRef,n),D="headlessui-menu-items-"+(0,v.M)(),P=h(),A=(0,b.oJ)(),Y=null!==A?A===b.ZM.Open:T.menuState===o.Open;(0,i.useEffect)((function(){var e=T.itemsRef.current;e&&T.menuState===o.Open&&e!==document.activeElement&&e.focus({preventScroll:!0})}),[T.menuState,T.itemsRef]),d={container:T.itemsRef.current,enabled:T.menuState===o.Open,accept:function(e){return"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk:function(e){e.setAttribute("role","none")}},g=d.container,y=d.accept,x=d.walk,k=void 0===(E=d.enabled)||E,R=(0,i.useRef)(y),C=(0,i.useRef)(x),(0,i.useEffect)((function(){R.current=y,C.current=x}),[y,x]),(0,p.e)((function(){if(g&&k)for(var e=R.current,t=C.current,n=Object.assign((function(t){return e(t)}),{acceptNode:e}),r=document.createTreeWalker(g,NodeFilter.SHOW_ELEMENT,n,!1);r.nextNode();)t(r.currentNode)}),[g,k,R,C]);var L=(0,i.useCallback)((function(e){switch(P.dispose(),e.key){case f.R.Space:if(""!==T.searchQuery)return e.preventDefault(),e.stopPropagation(),O({type:u.Search,value:e.key});case f.R.Enter:if(e.preventDefault(),e.stopPropagation(),O({type:u.CloseMenu}),null!==T.activeItemIndex){var t,n=T.items[T.activeItemIndex].id;null==(t=document.getElementById(n))||t.click()}(0,I.k)().nextFrame((function(){var e;return null==(e=T.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case f.R.ArrowDown:return e.preventDefault(),e.stopPropagation(),O({type:u.GoToItem,focus:r.Next});case f.R.ArrowUp:return e.preventDefault(),e.stopPropagation(),O({type:u.GoToItem,focus:r.Previous});case f.R.Home:case f.R.PageUp:return e.preventDefault(),e.stopPropagation(),O({type:u.GoToItem,focus:r.First});case f.R.End:case f.R.PageDown:return e.preventDefault(),e.stopPropagation(),O({type:u.GoToItem,focus:r.Last});case f.R.Escape:e.preventDefault(),e.stopPropagation(),O({type:u.CloseMenu}),(0,I.k)().nextFrame((function(){var e;return null==(e=T.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case f.R.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(O({type:u.Search,value:e.key}),P.setTimeout((function(){return O({type:u.ClearSearch})}),350))}}),[O,P,T]),j=(0,i.useCallback)((function(e){switch(e.key){case f.R.Space:e.preventDefault()}}),[]),G=(0,i.useMemo)((function(){return{open:T.menuState===o.Open}}),[T]),U={"aria-activedescendant":null===T.activeItemIndex||null==(a=T.items[T.activeItemIndex])?void 0:a.id,"aria-labelledby":null==(l=T.buttonRef.current)?void 0:l.id,id:D,onKeyDown:L,onKeyUp:j,role:"menu",tabIndex:0,ref:F},_=t;return(0,s.sY)({props:(0,c.gY)({},_,U),slot:G,defaultTag:"div",features:N,visible:Y,name:"Menu.Items"})})),T=i.Fragment;w.Button=C,w.Items=M,w.Item=function e(t){var n=t.disabled,a=void 0!==n&&n,l=t.onClick,m=(0,c.gK)(t,["disabled","onClick"]),f=S([w.name,e.name].join(".")),d=f[0],g=f[1],y="headlessui-menu-item-"+(0,v.M)(),b=null!==d.activeItemIndex&&d.items[d.activeItemIndex].id===y;(0,p.e)((function(){if(d.menuState===o.Open&&b){var e=(0,I.k)();return e.nextFrame((function(){var e;return null==(e=document.getElementById(y))||null==e.scrollIntoView?void 0:e.scrollIntoView({block:"nearest"})})),e.dispose}}),[y,b,d.menuState]);var h=(0,i.useRef)({disabled:a});(0,p.e)((function(){h.current.disabled=a}),[h,a]),(0,p.e)((function(){var e,t;h.current.textValue=null==(e=document.getElementById(y))||null==(t=e.textContent)?void 0:t.toLowerCase()}),[h,y]),(0,p.e)((function(){return g({type:u.RegisterItem,id:y,dataRef:h}),function(){return g({type:u.UnregisterItem,id:y})}}),[h,y]);var x=(0,i.useCallback)((function(e){return a?e.preventDefault():(g({type:u.CloseMenu}),(0,I.k)().nextFrame((function(){var e;return null==(e=d.buttonRef.current)?void 0:e.focus({preventScroll:!0})})),l?l(e):void 0)}),[g,d.buttonRef,a,l]),E=(0,i.useCallback)((function(){if(a)return g({type:u.GoToItem,focus:r.Nothing});g({type:u.GoToItem,focus:r.Specific,id:y})}),[a,y,g]),k=(0,i.useCallback)((function(){a||b||g({type:u.GoToItem,focus:r.Specific,id:y})}),[a,b,y,g]),R=(0,i.useCallback)((function(){a||b&&g({type:u.GoToItem,focus:r.Nothing})}),[a,b,g]),C=(0,i.useMemo)((function(){return{active:b,disabled:a}}),[b,a]),N={id:y,role:"menuitem",tabIndex:!0===a?void 0:-1,"aria-disabled":!0===a||void 0,disabled:void 0,onClick:x,onFocus:E,onPointerMove:k,onMouseMove:k,onPointerLeave:R,onMouseLeave:R};return(0,s.sY)({props:(0,c.gY)({},m,N),slot:C,defaultTag:T,name:"Menu.Item"})};var O=n(6215),F=n(6049);function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){i=!0,a=e}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function Y(e){var t=D((0,i.useState)(void 0),2),n=t[0],r=t[1],a=D((0,i.useState)(1),2),o=a[0],u=a[1];(0,i.useEffect)((function(){fetch("./api/account/check_status").then((function(e){return e.json()})).then((function(e){console.log(e),e.authenticated?(u(0),r(e)):(u(1),r(void 0))}))}),[]);var c=[{title:"Your Profile",link:""},{title:"Settings",link:""},{title:"Sign out",link:"./signout"}];return[i.createElement(i.Fragment,null,i.createElement("div",{className:"hidden md:flex items-center justify-end md:flex-1 lg:w-0"},i.createElement(w,{as:"div",className:"ml-3 relative"},(function(e){var t=e.open;return i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(w.Button,{className:"max-w-xs border-2  rounded-full flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-green-800 focus:ring-white",title:n&&n.first_name},i.createElement("span",{className:"sr-only"},"Open user menu"),i.createElement("img",{className:"h-8 w-8 rounded-full bg-white p-2 text-gray-900",src:n&&n.userImage,alt:n&&n.first_name,title:n&&n.first_name}))),i.createElement(O.u,{show:t,as:i.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"},i.createElement(w.Items,{static:!0,className:"z-40 sorigin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"},c.map((function(e){return i.createElement(w.Item,{key:e.title},(function(t){var n=t.active;return i.createElement("a",{href:e.link,className:A(n?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700")},e.title)}))})))))}))),i.createElement("div",{className:"block md:hidden mx-5 pt-4 pb-3 border-t border-gray-700"},i.createElement("div",{className:"flex items-center "},i.createElement("div",{className:"flex-shrink-0"},i.createElement("img",{className:"h-10 w-10 rounded-full p-2 bg-white border",src:null!=n?n.userImage:"",alt:""})),i.createElement("div",{className:"ml-3"},i.createElement("div",{className:"text-base font-medium leading-none"},null!=n?n.username:""),i.createElement("div",{className:"text-sm font-medium leading-none text-gray-400"},null!=n?n.email:"")),i.createElement("button",{className:"ml-auto focus:outline-none flex-shrink-0 p-1 rounded-full text-green-600 bg-white hover:bg-gray-200 "},i.createElement("span",{className:"sr-only"},"View notifications"),i.createElement(F.Dkj,{className:"h-6 w-6","aria-hidden":"true"}))),i.createElement("div",{className:"mt-3  space-y-1 "},c.map((function(e){var t=e.title,n=e.link;return i.createElement("a",{key:t,href:n,className:"-mx-3 px-3 py-2 block rounded-md text-base font-medium hover:bg-gray-200"},t)}))))),i.createElement(i.Fragment,null,i.createElement("div",{className:"hidden md:flex items-center justify-end md:flex-1 lg:w-0"},i.createElement("a",{href:"./signin",className:"btn-primary"},"Sign in")),i.createElement("div",{className:"flex md:hidden mx-5 pb-6"},i.createElement("a",{href:"./signin",className:"w-full btn-primary"},"Sign in")))][o]}n(5656)}}]);